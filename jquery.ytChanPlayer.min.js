/* jQuery Youtube Channel Player 0.2.0
 * Author: Marc LÃ¶he <marc@marcloehe.de>
 * Licensed under the MIT license.
 */
!function(e){"use strict";e.fn.ytChanPlayer=function(t){var a,n,s=e(this),l=e("<ul/>",{class:"yt-channel-list"}),i=e.extend({},e.fn.ytChanPlayer.defaults,t),r=!1,p=[],o=function(t){var a="http://www.youtube.com/embed/"+t;return i.playerOpts&&(a+="?"+e.param(i.playerOpts)),a},u=function(t){t.length>0&&(a||(n=e("<div/>",{class:"yt-player-wrapper"}),a=e("<iframe/>",{class:"yt-player"}).prependTo(n),n.prependTo(s)),a.attr("src",o(t)),r=!0)},d=function(e){for(var t=Array.prototype.slice.call(arguments,1),a=0;a<t.length;a++){if(!e||!e.hasOwnProperty(t[a]))return!1;e=e[t[a]]}return!0};return s.addClass("yt-channel-holder"),l.on("click",".yt-channel-video a",function(t){t.preventDefault(),i.playerOpts=e.extend(i.playerOpts,{autoplay:1}),u(e(this).data("id"))}).appendTo(s),e.get("https://www.googleapis.com/youtube/v3/channels",{part:"contentDetails",key:i.apiKey,forHandle:i.username}).then(function(t,a,n){var s;return t.items&&t.items[0]&&d(t.items[0],"contentDetails","relatedPlaylists","uploads")?(s={part:"snippet",key:i.apiKey,playlistId:t.items[0].contentDetails.relatedPlaylists.uploads,maxResults:i.maxResults},e.get("https://www.googleapis.com/youtube/v3/playlistItems",s)):e.Deferred().reject(t,"Unable to fetch playlist items.",n).promise()}).then(function(t,a,n){if(!t.items||!t.items.length)return e.Deferred().reject(t,"Unable to fetch playlist items.",n).promise();e.each(t.items,function(t,a){var n,s,c,y;if(!d(a,"snippet","resourceId","videoId"))return!0;(n={videoId:a.snippet.resourceId.videoId,title:a.snippet.title,thumbnail:a.snippet.thumbnails.default.url}).embedUrl=o(n.id),r||u(i.sticky||a.snippet.resourceId.videoId),s=n,c=e("<li/>",{class:"yt-channel-video"}),y=e("<a/>",{href:s.embedUrl,title:s.title,target:"_blank","data-id":s.videoId}).appendTo(c),e("<img/>",{class:"vid-thumb",alt:s.title,src:s.thumbnail}).appendTo(y),c.appendTo(l),p.push(s)})}).fail(function(e,t,a){i.debug&&console.log("Error: "+t)}),this},e.fn.ytChanPlayer.defaults={apiKey:"",username:"",maxResults:10,debug:!1,playerOpts:{autohide:1,autoplay:0,fs:1,showinfo:0}}}(jQuery);
